import{a as h,j as e}from"./index-N2YQyXXr.js";import{f as E,u as F,r as i}from"./react-vendor-B4ExKG6A.js";import{L as w}from"./Layout-BFNCpxx4.js";import{m as t,A as j}from"./animation-DFf1LwfH.js";import{x as $,g as Q,y as T,z as L,u as P,b as R}from"./ui-BeyZ1CGM.js";const D=()=>{const{sessionId:n}=E(),g=F(),[o,v]=i.useState(null),[l,x]=i.useState(0),[d,m]=i.useState(""),[c,u]=i.useState(!1),[s,p]=i.useState(null),[N,k]=i.useState(!0),y=i.useRef(null);i.useEffect(()=>{S()},[n]),i.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[s]);const S=async()=>{try{const a=await h.get(`/interview/session/${n}`);v(a.data);const r=a.data.questions.filter(A=>A.answer).length;x(r),k(!1)}catch{alert("Failed to load interview session"),g("/dashboard")}},C=async()=>{if(!d.trim()){alert("Please provide an answer");return}u(!0);try{const a=await h.post(`/interview/answer/${n}`,{questionIndex:l,answer:d.trim()});p(a.data),setTimeout(()=>{l<o.questions.length-1?(x(r=>r+1),m(""),p(null)):f()},3e3)}catch{alert("Failed to submit answer")}finally{u(!1)}},I=()=>{l<o.questions.length-1?(x(a=>a+1),m(""),p(null)):f()},f=async()=>{try{await h.post(`/interview/complete/${n}`),g(`/interview-complete/${n}`)}catch{alert("Failed to complete interview")}};if(N)return e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[e.jsx(t.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading interview session..."})]})});const q=o?.questions[l],b=(l+1)/o.questions.length*100;return e.jsx(w,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-pink-900/20 -m-6 p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"glass-effect rounded-3xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx($,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Interview in Progress"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Question ",l+1," of ",o.questions.length]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-primary-600 to-purple-600 bg-clip-text text-transparent",children:[Math.round(b),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Complete"})]})})]}),e.jsxs("div",{className:"relative w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[e.jsx(t.div,{initial:{width:0},animate:{width:`${b}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full bg-gradient-to-r from-primary-500 via-purple-500 to-pink-500 rounded-full"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-shimmer"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{mode:"wait",children:e.jsx(t.div,{initial:{opacity:0,x:-50,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.95},transition:{type:"spring",stiffness:400,damping:25,duration:.3},className:"glass-effect rounded-3xl p-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg",children:e.jsx(Q,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-xl text-gray-900 dark:text-white leading-relaxed",children:q.question})})]})},l)}),e.jsx(j,{mode:"wait",children:s?e.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"glass-effect rounded-3xl p-8 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx(t.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(P,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:["AI Evaluation",e.jsx(R,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:s.feedback})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{label:"Overall",value:s.score,color:"from-blue-500 to-cyan-500"},{label:"Relevance",value:s.relevance,color:"from-purple-500 to-pink-500"},{label:"Clarity",value:s.clarity,color:"from-orange-500 to-red-500"},{label:"Technical",value:s.technicalDepth,color:"from-green-500 to-emerald-500"}].map((a,r)=>e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-lg",children:[e.jsxs("div",{className:`text-3xl font-bold bg-gradient-to-r ${a.color} bg-clip-text text-transparent mb-1`,children:[a.value,"/10"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:a.label})]},a.label))}),s.missingKeywords?.length>0&&e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-2xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-300 mb-2",children:"ðŸ’¡ Consider mentioning:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.missingKeywords.map((a,r)=>e.jsx(t.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5+.1*r},className:"px-3 py-1 bg-yellow-200 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-medium",children:a},r))})]}),e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Moving to next question..."})]})})]}):e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect rounded-3xl p-8",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Your Answer"}),e.jsx("textarea",{value:d,onChange:a=>m(a.target.value),placeholder:"Share your thoughts and expertise...",className:"input min-h-[200px] resize-none text-lg",disabled:c}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:C,disabled:c||!d.trim(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 flex-1 py-4",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Evaluating Answer..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{children:"Submit Answer"})]})}),e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:I,disabled:c,className:"glass-effect px-6 py-4 rounded-xl font-semibold text-gray-700 dark:text-gray-300 hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"Skip Question"})]})]})]})}),e.jsx("div",{ref:y})]})]})})})};export{D as default};
