import{u as U,a as x,j as e}from"./index-B1xVeXdm.js";import{r as l}from"./react-vendor-B4ExKG6A.js";import{H as $,T as P,S as z,Z as O,K as Q,j as C,N as W,O as Y,X as Z,M as B,Q as K,b as V,a as X,g as q,e as G,d as J,h as b,V as S,W as _,Y as i}from"./ui-p2-wtr7c.js";import{L as ee}from"./Layout-D-UFDI-y.js";import{m as t}from"./animation-DFf1LwfH.js";const ne=()=>{const{user:s,updateUser:j}=U(),[g,h]=l.useState(!1),[n,A]=l.useState(null),[d,p]=l.useState({name:s?.name||"",email:s?.email||""}),[ae,N]=l.useState(!0),[T,u]=l.useState(!1),[D,v]=l.useState(!1),[r,c]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,k]=l.useState("");l.useEffect(()=>{E()},[]);const E=async()=>{try{const a=await x.get("/analytics");A(a.data),N(!1)}catch(a){console.error("Failed to fetch stats:",a),N(!1)}},H=async()=>{try{await x.put("/auth/profile",d),j({name:d.name,email:d.email}),h(!1),i.success("Profile updated successfully!")}catch{i.error("Failed to update profile")}},M=()=>{p({name:s?.name||"",email:s?.email||""}),h(!1)},L=async()=>{if(r.newPassword!==r.confirmPassword){i.error("New passwords do not match");return}if(r.newPassword.length<6){i.error("Password must be at least 6 characters long");return}try{await x.post("/auth/change-password",{currentPassword:r.currentPassword,newPassword:r.newPassword}),i.success("Password changed successfully!"),u(!1),c({currentPassword:"",newPassword:"",confirmPassword:""});const a=await x.get("/auth/profile");j(a.data)}catch(a){i.error(a.response?.data?.message||"Failed to change password")}},F=async()=>{if(!f){i.error("Please enter your password to confirm");return}if(window.confirm("Are you absolutely sure? This action cannot be undone."))try{await x.delete("/auth/account",{data:{password:f}}),alert("Account deleted successfully"),localStorage.removeItem("token"),window.location.href="/"}catch(a){i.error(a.response?.data?.message||"Failed to delete account")}},w=[{icon:$,title:"First Interview",description:"Completed your first mock interview",unlocked:n?.totalSessions>=1,gradient:"from-yellow-500 to-orange-500"},{icon:P,title:"Perfect Score",description:"Achieved 90+ overall score",unlocked:n?.averageScore>=90,gradient:"from-green-500 to-emerald-500"},{icon:z,title:"Expert Level",description:"Reached Expert readiness level",unlocked:n?.readinessLevel==="Expert",gradient:"from-purple-500 to-pink-500"},{icon:O,title:"Speed Demon",description:"Completed 5+ interviews",unlocked:n?.totalSessions>=5,gradient:"from-blue-500 to-cyan-500"}],I=a=>{if(!a)return"Never";const m=new Date,y=new Date(a),R=m-y,o=Math.floor(R/(1e3*60*60*24));return o===0?"Today":o===1?"Yesterday":o<30?`${o} days ago`:o<365?`${Math.floor(o/30)} months ago`:`${Math.floor(o/365)} years ago`};return e.jsxs(ee,{children:[e.jsx(Q,{position:"top-right"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-pink-900/20 -m-6 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 pt-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:20,duration:.3},className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx(C,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"My Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account and track your progress"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"lg:col-span-2",children:e.jsxs("div",{className:"glass-effect rounded-3xl p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-primary-500/20 to-purple-500/20 rounded-full blur-3xl -z-10"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-500 to-purple-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl",children:s?.name?.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s?.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Member since ",s?.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"]})]})]}),g?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl shadow-lg",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]}),e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:M,className:"flex items-center gap-2 px-4 py-2 glass-effect rounded-xl",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel"})]})]}):e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-primary-500 to-purple-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Profile"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Full Name"]}),g?e.jsx("input",{type:"text",value:d.name,onChange:a=>p({...d,name:a.target.value}),className:"input w-full"}):e.jsx("p",{className:"text-lg text-gray-900 dark:text-white font-medium",children:s?.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Email Address"]}),g?e.jsx("input",{type:"email",value:d.email,onChange:a=>p({...d,email:a.target.value}),className:"input w-full"}):e.jsx("p",{className:"text-lg text-gray-900 dark:text-white font-medium",children:s?.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Target Role"]}),e.jsx("p",{className:"text-lg text-gray-900 dark:text-white font-medium",children:s?.selectedRole||"Not selected"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Account Created"]}),e.jsx("p",{className:"text-lg text-gray-900 dark:text-white font-medium",children:s?.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]})}),e.jsx(t.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-6",children:e.jsxs("div",{className:"glass-effect rounded-3xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Quick Stats"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(t.div,{whileHover:{scale:1.02},className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Sessions"}),e.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:n?.totalSessions||0})]}),e.jsxs(t.div,{whileHover:{scale:1.02},className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Average Score"}),e.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:n?.averageScore||0})]}),e.jsxs(t.div,{whileHover:{scale:1.02},className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Readiness Level"}),e.jsx("p",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:n?.readinessLevel||"Beginner"})]})]})]})})]}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-8",children:e.jsxs("div",{className:"glass-effect rounded-3xl p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Achievements"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w.filter(a=>a.unlocked).length," of ",w.length," unlocked"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:w.map((a,m)=>{const y=a.icon;return e.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4+.1*m,duration:.2,type:"spring",stiffness:400,damping:25},whileHover:{scale:1.03,y:-5},className:`relative rounded-2xl p-6 transition-all ${a.unlocked?"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-lg":"bg-gray-100 dark:bg-gray-800/50 opacity-50"}`,children:[a.unlocked&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(t.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.5+.1*m,type:"spring"},className:"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-4 h-4 text-white"})})}),e.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${a.gradient} rounded-xl flex items-center justify-center mb-4 shadow-lg`,children:e.jsx(y,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-1",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.description}),!a.unlocked&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/10 dark:bg-gray-900/50 rounded-2xl backdrop-blur-sm",children:e.jsx(G,{className:"w-8 h-8 text-gray-600 dark:text-gray-400"})})]},a.title)})})]})}),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Account Security"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage your password and account settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Change Password"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Password"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-semibold",children:"••••••••"})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Changed"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-semibold text-sm",children:I(s?.passwordChangedAt)})]}),e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:()=>u(!0),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-xl text-sm font-semibold shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Change Password"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-lg border-2 border-red-300 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(S,{className:"w-5 h-5 text-red-600"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Delete Account"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Once you delete your account, there is no going back. All your data will be permanently deleted."}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/50 rounded-xl p-3 mb-4",children:e.jsx("p",{className:"text-xs text-red-800 dark:text-red-300 font-semibold",children:"⚠️ This action cannot be undone"})}),e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:()=>v(!0),className:"w-full px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl text-sm font-semibold shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),"Delete Account"]})]})]})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"glass-effect rounded-3xl p-8 max-w-md w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center",children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Change Password"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",value:r.currentPassword,onChange:a=>c({...r,currentPassword:a.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Enter current password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:r.newPassword,onChange:a=>c({...r,newPassword:a.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:r.confirmPassword,onChange:a=>c({...r,confirmPassword:a.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Confirm new password"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:L,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"Change Password"}),e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:()=>{u(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 px-6 py-3 glass-effect rounded-xl font-semibold text-gray-700 dark:text-gray-300 hover:shadow-lg transition-all",children:"Cancel"})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"glass-effect rounded-3xl p-8 max-w-md w-full shadow-2xl border-2 border-red-200 dark:border-red-900/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center",children:e.jsx(S,{className:"w-6 h-6 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Delete Account"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/50 rounded-xl p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-red-800 dark:text-red-300 font-semibold mb-2",children:"⚠️ Warning: This action is irreversible!"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"All your data including interview sessions, progress, and achievements will be permanently deleted."})]}),e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Enter your password to confirm"}),e.jsx("input",{type:"password",value:f,onChange:a=>k(a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Enter your password"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:F,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"Delete Account"}),e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.15},onClick:()=>{v(!1),k("")},className:"flex-1 px-6 py-3 glass-effect rounded-xl font-semibold text-gray-700 dark:text-gray-300 hover:shadow-lg transition-all",children:"Cancel"})]})]})})]})};export{ne as default};
