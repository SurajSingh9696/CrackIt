import{a as g,j as e}from"./index-ovNZs1KZ.js";import{f as E,u as F,r}from"./react-vendor-B4ExKG6A.js";import{L as w}from"./Layout-B7-WQPxW.js";import{m as s,A as j}from"./animation-DFf1LwfH.js";import{x as $,g as Q,y as T,z as L,u as P,b as R}from"./ui-p2-wtr7c.js";const D=()=>{const{sessionId:n}=E(),h=F(),[o,v]=r.useState(null),[l,m]=r.useState(0),[d,x]=r.useState(""),[c,u]=r.useState(!1),[a,p]=r.useState(null),[N,k]=r.useState(!0),y=r.useRef(null);r.useEffect(()=>{S()},[n]),r.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[a]);const S=async()=>{try{const t=await g.get(`/interview/session/${n}`);v(t.data);const i=t.data.questions.filter(A=>A.answer).length;m(i),k(!1)}catch{alert("Failed to load interview session"),h("/dashboard")}},C=async()=>{if(!d.trim()){alert("Please provide an answer");return}u(!0);try{const t=await g.post(`/interview/answer/${n}`,{questionIndex:l,answer:d.trim()});p(t.data),setTimeout(()=>{l<o.questions.length-1?(m(i=>i+1),x(""),p(null)):f()},3e3)}catch{alert("Failed to submit answer")}finally{u(!1)}},I=()=>{l<o.questions.length-1?(m(t=>t+1),x(""),p(null)):f()},f=async()=>{try{await g.post(`/interview/complete/${n}`),h(`/interview-complete/${n}`)}catch{alert("Failed to complete interview")}};if(N)return e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[e.jsx(s.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading interview session..."})]})});const q=o?.questions[l],b=(l+1)/o.questions.length*100;return e.jsx(w,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-pink-900/20 -m-4 sm:-m-6 p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"glass-effect rounded-2xl sm:rounded-3xl p-4 sm:p-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-primary-500 to-purple-600 rounded-lg sm:rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx($,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-white",children:"Interview in Progress"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:["Question ",l+1," of ",o.questions.length]})]})]}),e.jsxs("div",{className:"w-full sm:w-auto text-left sm:text-right",children:[e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-600 to-purple-600 bg-clip-text text-transparent",children:[Math.round(b),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Complete"})]})]}),e.jsxs("div",{className:"relative w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[e.jsx(s.div,{initial:{width:0},animate:{width:`${b}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full bg-gradient-to-r from-primary-500 via-purple-500 to-pink-500 rounded-full"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-shimmer"})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx(j,{mode:"wait",children:e.jsx(s.div,{initial:{opacity:0,x:-50,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.95},transition:{type:"spring",stiffness:400,damping:25,duration:.3},className:"glass-effect rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(s.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg",children:e.jsx(Q,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx(s.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-xl text-gray-900 dark:text-white leading-relaxed",children:q.question})})]})},l)}),e.jsx(j,{mode:"wait",children:a?e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"glass-effect rounded-3xl p-8 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx(s.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(P,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:["AI Evaluation",e.jsx(R,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:a.feedback})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{label:"Overall",value:a.score,color:"from-blue-500 to-cyan-500"},{label:"Relevance",value:a.relevance,color:"from-purple-500 to-pink-500"},{label:"Clarity",value:a.clarity,color:"from-orange-500 to-red-500"},{label:"Technical",value:a.technicalDepth,color:"from-green-500 to-emerald-500"}].map((t,i)=>e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*i},className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-lg",children:[e.jsxs("div",{className:`text-3xl font-bold bg-gradient-to-r ${t.color} bg-clip-text text-transparent mb-1`,children:[t.value,"/10"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:t.label})]},t.label))}),a.missingKeywords?.length>0&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-2xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-300 mb-2",children:"ðŸ’¡ Consider mentioning:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.missingKeywords.map((t,i)=>e.jsx(s.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5+.1*i},className:"px-3 py-1 bg-yellow-200 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-medium",children:t},i))})]}),e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Moving to next question..."})]})})]}):e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect rounded-3xl p-8",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Your Answer"}),e.jsx("textarea",{value:d,onChange:t=>x(t.target.value),placeholder:"Share your thoughts and expertise...",className:"input min-h-[200px] resize-none text-lg",disabled:c}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:C,disabled:c||!d.trim(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 flex-1 py-4",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Evaluating Answer..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{children:"Submit Answer"})]})}),e.jsxs(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:I,disabled:c,className:"glass-effect px-6 py-4 rounded-xl font-semibold text-gray-700 dark:text-gray-300 hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"Skip Question"})]})]})]})}),e.jsx("div",{ref:y})]})]})})})};export{D as default};
