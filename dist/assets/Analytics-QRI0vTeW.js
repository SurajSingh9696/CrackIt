import{a as d,j as e}from"./index-B1xVeXdm.js";import{r}from"./react-vendor-B4ExKG6A.js";import{L as c}from"./Layout-D-UFDI-y.js";import{a as m,T as u,x as v,b as w}from"./ui-p2-wtr7c.js";import{m as s}from"./animation-DFf1LwfH.js";import{R as x,L as k,C as y,X as h,Y as j,T as p,a as S,B as T,b as A}from"./charts-DkbxFO_B.js";const B=()=>{const[a,f]=r.useState(null),[l,g]=r.useState([]),[N,n]=r.useState(!0);r.useEffect(()=>{b()},[]);const b=async()=>{try{const[t,i]=await Promise.all([d.get("/analytics"),d.get("/analytics/history")]);f(t.data),g(i.data),n(!1)}catch(t){console.error("Failed to fetch analytics:",t),n(!1)}};if(N)return e.jsx(c,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})});if(!a||a.totalSessions===0)return e.jsx(c,{children:e.jsx("div",{className:"max-w-4xl mx-auto text-center py-12",children:e.jsxs("div",{className:"card",children:[e.jsx(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Analytics Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Complete your first interview to see your performance analytics"}),e.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"btn-primary",children:"Start Interview"})]})})});const o=Object.entries(a.topicStrengths).map(([t,i])=>({topic:t,score:i}));return e.jsx(c,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Performance Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track your progress and identify areas for improvement"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Sessions"}),e.jsx(u,{className:"w-5 h-5 text-primary-600"})]}),e.jsx("p",{className:"text-3xl font-bold",children:a.totalSessions})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Average Score"}),e.jsx(m,{className:"w-5 h-5 text-primary-600"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:[a.averageScore,"/10"]})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Communication"}),e.jsx(v,{className:"w-5 h-5 text-primary-600"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:[a.communicationScore,"/10"]})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Trend"}),e.jsx(w,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:a.accuracyOverTime.length>1&&a.accuracyOverTime[a.accuracyOverTime.length-1].score>a.accuracyOverTime[0].score?"↑":"→"})]})]}),a.accuracyOverTime.length>0&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Score Over Time"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(k,{data:a.accuracyOverTime,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(h,{dataKey:"date"}),e.jsx(j,{domain:[0,10]}),e.jsx(p,{}),e.jsx(S,{type:"monotone",dataKey:"score",stroke:"#4f46e5",strokeWidth:2,dot:{fill:"#4f46e5",r:4}})]})})]}),o.length>0&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"card mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Performance by Role"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(T,{data:o,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(h,{dataKey:"topic"}),e.jsx(j,{domain:[0,10]}),e.jsx(p,{}),e.jsx(A,{dataKey:"score",fill:"#4f46e5"})]})})]}),l.length>0&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"card",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Session History"}),e.jsx("div",{className:"space-y-4",children:l.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.role}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(t.createdAt).toLocaleDateString()," • ",t.duration,"m"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-primary-600",children:[t.overallScore,"/10"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.readinessLevel})]})]},t._id))})]})]})})};export{B as default};
